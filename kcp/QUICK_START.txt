â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          KCP Integration into sing-box - Quick Reference             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ FILES TO CREATE IN SING-BOX:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  â–¡ constant/protocol.go      â†’ Add: TypeKCP = "kcp"
  â–¡ option/kcp.go             â†’ KCPOptions, KCPOutboundOptions, KCPInboundOptions
  â–¡ outbound/kcp.go           â†’ Client implementation (300 lines)
  â–¡ inbound/kcp.go            â†’ Server implementation (300 lines)
  
ğŸ“ FILES TO MODIFY IN SING-BOX:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  â–¡ option/outbound.go        â†’ Add KCPOptions field + UnmarshalJSON case
  â–¡ option/inbound.go         â†’ Add KCPOptions field + UnmarshalJSON case
  â–¡ outbound/builder.go       â†’ Add case C.TypeKCP: return NewKCP(...)
  â–¡ inbound/builder.go        â†’ Add case C.TypeKCP: return NewKCP(...)

ğŸ”§ CORE IMPLEMENTATION:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  Client (outbound/kcp.go):
    - NewKCP() â†’ Creates kcp.Client
    - DialContext() â†’ Returns net.Conn for TCP/UDP
    - ListenPacket() â†’ Returns net.PacketConn
    
  Server (inbound/kcp.go):
    - NewKCP() â†’ Creates kcp.Service[int]
    - Start() â†’ Calls service.Start(udpConn)
    - NewConnectionEx() â†’ Routes TCP connections
    - NewPacketConnectionEx() â†’ Routes UDP packets

ğŸ“¦ DEPENDENCIES:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  go get github.com/sagernet/sing-quic@latest
  go get github.com/xtaci/kcp-go/v5@latest

ğŸ§ª TEST CONFIG:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  Client: {"type":"kcp","server":"...","uuid":"...","password":"..."}
  Server: {"type":"kcp","listen":"...","users":[{"uuid":"..."}]}

âœ… VERIFICATION:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  1. go build -o sing-box ./cmd/sing-box
  2. ./sing-box run -c server.json
  3. ./sing-box run -c client.json
  4. curl -x socks5://127.0.0.1:1080 http://example.com

ğŸ“š FULL GUIDE: See SING_BOX_INTEGRATION.md (905 lines, complete)
